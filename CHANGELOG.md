# Changelog

本文档记录了IndexTTS项目的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
项目遵循 [语义化版本控制](https://semver.org/lang/zh-CN/)。

## [0.2.2] - 2025-07-02

### 新增 ✨
- **智能分句系统**: 全新的语义感知分句算法，支持长句子智能分割
  - 6级分割优先级：逗号(优先级1) → 分号冒号(2) → 连词(3) → 介词(4) → 关系词(5) → 连字符(6)
  - 动态规划优化算法，实现分割段落长度均衡
  - 智能语义分割点识别，避免在不自然位置断句
  - 均匀分割兜底机制，确保所有句子符合长度限制

### 修复 🐛
- **分段功能修复**: 修复章节分段功能无法生成文件的问题
  - 修复kwargs变量未定义错误
  - 添加TTS推理失败的错误处理机制
  - 修复生成文件为空时的IndexError异常
  - 增加分段条件和生成过程的调试日志

### 改进 🔧
- **句子分割质量提升**: 超长句子现在能在更自然的语义位置分割
- **错误处理增强**: 分段过程中的错误现在有详细的错误信息输出
- **代码结构优化**: 重构分割逻辑，提高代码可维护性

### 技术细节 🛠️
- 在 `indextts/utils/front.py` 中实现智能分句算法
- 在 `webui.py` 中修复分段功能的多个bug
- 添加完整的测试文件验证功能正确性

## [0.2.0] - 2025-01-16

### 新增 ✨
- **现代化UI/UX设计系统**: 全新的渐变背景、专业主题、组件分组
- **智能章节管理**: 高度控制预览（300px最大）、最多显示10章节、滚动查看
- **自动文件组织**: 分段文件统一文件夹管理，标准化命名规范（filename_1, filename_2）
- **Emoji导航增强**: 所有组件使用直观图标标识（🎵📝⚙️📊等）
- **响应式布局**: 左侧控制面板+右侧生成设置的优化布局
- **CSS样式系统**: 5个主要样式类（main-container, chapter-display等）

### 改进 🔧
- **章节预览优化**: 内容预览限制为80字符，自动省略处理
- **界面组件分组**: 使用gr.Group实现清晰的视觉分离
- **文件命名标准化**: epub文件名+序号的统一命名规范
- **用户体验提升**: 更清晰的状态显示和错误信息
- **章节分段设置**: 每个文件包含章节数范围调整为1-20

### 技术变更 🛠️
- 添加了完整的CSS样式表定义
- 重构了WebUI组件布局结构
- 优化了章节显示格式化函数
- 实现了智能文件组织逻辑
- 增强了分段文件生成流程

### 测试 🧪
- 添加了WebUI界面优化验证脚本
- 100%功能完成度验证通过
- 所有CSS类和组件改进验证通过

## [0.1.4] - 2025-01-15

### 新增 ✨
- **智能时间预测**: 多算法融合的ETA计算系统
- **音频质量控制**: 32-320kbps可调节码率
- **章节分段功能**: EPUB文件章节分割支持
- **后台任务管理**: 长文本自动后台处理
- **实时系统监控**: CPU、内存、GPU状态跟踪
- **内存优化**: 显存泄漏修复和综合内存管理

### 改进 🔧
- 移除了GPU显存显示以简化界面
- 增强了进度显示的准确性
- 优化了WebUI界面的专业性
- 改进了错误处理和用户体验

### 修复 🐛
- 修复了GPU显存持续增长的内存泄漏问题
- 解决了长文本生成时的连接超时问题
- 修复了进度显示不准确的问题

## [0.1.3] - 2025-01-14

### 修复 🐛
- 基础功能稳定性改进
- 性能优化

## [0.1.2] - 2025-01-13

### 修复 🐛
- 初始版本Bug修复

## [0.1.1] - 2025-01-12

### 修复 🐛
- 发布后紧急修复

## [0.1.0] - 2025-01-11

### 新增 ✨
- IndexTTS核心功能实现
- 基础WebUI界面
- 命令行工具支持
- 模型推理功能
- 文档和示例

## v0.2.1 - 批量处理与智能章节解析 (2025-01-16)

### 🔥 新增功能
- **智能中文章节解析系统**: 支持多种中文章节格式自动识别
  - 结构化模式 (第X章, 卷X) - 置信度100
  - 关键词模式 (序言, 前言) - 置信度80  
  - 括号模式 ((一), （1）) - 置信度65
  - 序号模式 (一、1.) - 置信度60
  - 启发式模式识别 - 置信度30

- **批量文件处理系统**: 
  - 多文件同时上传和处理
  - ThreadPoolExecutor并发处理
  - 统一输出文件夹管理
  - 实时进度跟踪和状态监控

- **文本处理管道**:
  - 智能文件编码检测 (chardet库)
  - 文本清理功能 (合并空行, 移除多余空格)
  - 多编码格式robust支持
  - 预处理优化

- **批量任务管理**:
  - 完整的任务生命周期管理
  - 批量结果展示和统计
  - 错误处理和异常恢复
  - 任务队列和状态跟踪

### 🎨 界面改进
- 新增"批量转换"标签页
- 批量处理控制面板
- 任务状态监控界面
- 处理结果表格显示

### 🔧 技术改进
- SmartChapterParser智能解析器类
- 批量音频生成后台任务系统
- 文件编码自动检测机制
- 文本清理和预处理函数

### 📋 依赖更新
- 新增chardet库用于编码检测
- 优化现有依赖使用

### 📚 文档更新
- 更新README.md主要功能说明
- 完善ENHANCEMENTS.md技术细节
- 新增BATCH_PROCESSING_README.md详细文档
- 更新技术架构图

---

## 版本说明

- **主版本号**: 重大功能更新或架构变更
- **次版本号**: 新功能添加或重要改进
- **修订版本号**: Bug修复和小幅优化

## 贡献说明

所有v0.2.0的UI/UX改进均由Claude 4-Sonnet AI助手生成，包括：
- 现代化界面设计
- 智能章节管理
- 文件组织自动化
- 响应式布局优化
- 用户体验提升 